<!DOCTYPE html>
<html lang="pt">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eclipse Cross</title>

    <!-- FONT -->
    <link href="https://fonts.cdnfonts.com/css/mmc" rel="stylesheet">

    <!-- ICON -->
    <link rel="icon" type="image/x-icon" href="assets/logo/favicon.ico" />

    <!-- BOOTSTRAP CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet">

    <!-- MITSUBISHI -->
    <link href="3D.desk.css" rel="stylesheet">

    <!-- SKETCHFAB -->
    <script type="text/javascript"
      src="https://static.sketchfab.com/api/sketchfab-viewer-1.12.1.js"></script>

    <!-- JQUERY -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"
      crossorigin="anonymous"></script>

    <script>

    function OpenAR() {
      var userAgent = navigator.userAgent || navigator.vendor || window.opera;

      // Para usuários de iPhone/iPad
      if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {
        console.log('iphone');
        // Criar um link para Quick Look com arquivo .usdz
        document.getElementById('ios-ar-link').click();
      } else {
        console.log('android');
        // Redirecionar para Google's Scene Viewer ou URL apropriado para Android
        window.location.href = 'intent://arvr.google.com/scene-viewer/1.0?file=https%3A%2F%2Fsketchfab-prod-media.s3.amazonaws.com%2Farchives%2F42b51939c68e448b9c9a06a24a0d21e5%2Fgltf-ar%2F1a4aa2d45d7047fc92c900c64c9d5863%2Fscene.gltf&mode=ar_preferred&link=https%3A%2F%2Fsketchfab.com%2F3d-models%2Fmitsubishi-eclipse-cross-2024-copy-42b51939c68e448b9c9a06a24a0d21e5&title=Mitsubishi_Eclipse_Cross_2024%20-%20copy#Intent;scheme=https;package=com.google.ar.core;action=android.intent.action.VIEW;S.browser_fallback_url=https://developers.google.com/ar;end;';
      }
    }

    function ToogleMenu(){
        $("#info-cart").fadeToggle( "slow", "linear", function(){
          $("#arrow").toggleClass('flip');
        } );
    }

    </script>

  </head>

  <body>

    <!-- LOGO -->
    <div class="d-flex flex-column m-4"
      style="float:left; left: 0; top:0; position: absolute; z-index: 99;">
      <img src="assets/logo/logo.svg" width="100" alt="MITSUBISHI" />
    </div>

    <!-- MINIMIZE -->
    <div class="d-flex justify-content-start m-4"
      style="float: left; position: fixed; top:8px; right:0; display: none !important; z-index: 999; cursor: pointer;"
      id="toogle-menu">
      <img onclick="ToogleMenu()" src="assets/arrow.svg" width="27px" id="arrow" />
    </div>

    <!-- AR -->
    <div class="d-flex justify-content-start m-4"
      style="float: left; position: fixed; bottom:0; left:0">
      <img onclick="OpenAR()" src="assets/logo/icon-ar.svg" width="64px"
        style="display: none !important;" id="ar-button" />
    </div>

    <!-- INFO -->
    <div class="d-flex flex-column m-4"
      style="float: right; right: 0; position: absolute; display: none !important; width: 348px !important; z-index: 100;"
      id="info-area">

      <div>
        <h1>Eclipse Cross</h1>
      </div>

      <!-- CARD -->
      <div class="border border-danger rounded-3 bg-white p-3 mt-4"
        id="info-cart"
        style=" width: 348px !important;">
        <!-- Title -->

        <!-- Version Buttons -->
        <h6 class="mb-3">Selecione a Versão</h6>
        <div
          class="d-flex justify-content-center mb-4 border border-danger rounded-3 btn-group">
          <button
            class="gls btn btn-color flex-fill rounded-3 m-1 active">GLS</button>
          <button
            class="hpe btn btn-color flex-fill rounded-3 m-1">HPE</button>
          <button
            class="hpes btn btn-color flex-fill rounded-3 m-1">HPE-S</button>
          <button
            class="awd btn btn-color flex-fill rounded-3 m-1">S-AWC</button>
        </div>

        <!-- Color Picker -->
        <h6 class="info mb-3">Escolha a cor:</h6>

        <div id="external-colors"
          class="d-flex justify-content-center mb-4">

          <div class="color-square white car-color active"
            data-color-id="brancoAlpino" data-name="Branco Fuji"
            style="background-color: #ffffff; border: 1px solid black;"
            data-price="0"></div>

          <div class="color-square silver car-color"
            data-color-id="pretoOnix"
            data-name="Preto Onix Pearl" data-price="0"
            style="background-color: #343434;"></div>

          <div class="color-square gray car-color"
            data-color-id="azulBaikal"
            data-name="Azul Baikal" data-price="0"
            style="background-color: #1f478f;"></div>

          <div class="color-square red car-color"
            data-color-id="vermelhoLucid" data-name="Vermelho Lucid"
            data-price="0"
            style="background-color: #aa0e1e;"></div>

          <div class="color-square black car-color"
            data-color-id="prataCool"
            data-name="Prata Cool"
            style="background-color: #6d7170;" data-price="0"></div>

          <div class="color-square black car-color"
            data-color-id="cinzaLondrino" data-name="Cinza Londrino"
            data-price="0" style="background-color: #4a494f;"></div>

          <div class="color-square black car-color" class="car-color"
            data-color-id="prataLitio" data-name="Prata Lítio"
            data-price="0" style="background-color: #8d9391;"></div>
        </div>

        <div id="internal-colors"
          class="d-flex justify-content-center mb-4 d-none">
          <div class="color-square white int-color" id="intcolorwhite"
            data-color-id="White" data-name="Couro Cinza Claro"
            style="background-color: #FFFFFF; border: 1px solid black;"
            data-price="0"></div>

          <div class="color-square silver int-color active"
            data-color-id="Black" data-name="Couro Preto"
            style="background-color: #000000;" data-price="0"></div>
        </div>

        <!-- Features List -->
        <h6 class="mb-3">Acessórios:</h6>
        <ul class="exterior-items feature-list p-0">
          <li>Roda de liga leve 18"</li>
          <li>DRL em led</li>
          <li>Faróis e lanternas em led</li>
          <li>Ar-condicionado digital Dual Zone</li>
          <li>Multimídia JBL com Wi-Fi integrado</li>
          <li>Câmera de ré</li>
          <li>Bancos dianteiros elétricos e aquecidos</li>
        </ul>

      </div>

    </div>

    <!-- FOOTER BTNS -->
    <div class="d-flex justify-content-center mx-4 mb-1"
      style="float: right; right: 0; bottom: 0; position: absolute; display: none !important; width: 348px !important; z-index: 101;"
      id="base-buttons">

      <div class="p-1 py-0 flex-fill text-center camera rounded-3 bg-footer" id="exteriorView"
        data-cam-id="0">
        <img src="assets/001.svg">
        <h6>Externo</h6>
      </div>

      <div class="p-1 py-0 flex-fill text-center camera rounded-3 bg-footer" id="interiorView2"
        data-cam-id="1">
        <img src="assets/002.svg">
        <h6>Condutor</h6>
      </div>

      <div class="p-1 py-0 flex-fill text-center camera rounded-3 bg-footer" id="interiorView"
        data-cam-id="2">
        <img src="assets/003.svg">
        <h6>Interno</h6>
      </div>

      <div class="p-1 py-0 flex-fill text-center animation rounded-3 bg-footer" id="openDoor">
        <img src="assets/004.svg">
        <h6>Portas</h6>
      </div>
    </div>

    <div class="iframe-div"
      style="float: left; position: fixed; width: 100vw; height: 100%; top:0; left:0">
      <div class='iframe-gradient'></div>
      <div class='iframe-mask' id='iframe-mask'></div>
      <div class='iframe-loader' id='iframe-loader'>carregando 0%...</div>
      <div class='iframe-container' style="width: 100vw; height: 100%;">

        <iframe src id="api-frame"
          sandbox='allow-scripts allow-same-origin allow-popups allow-forms'
          allow="autoplay; fullscreen; xr-spatial-tracking"
          xr-spatial-tracking execution-while-out-of-viewport
          execution-while-not-rendered web-share allowfullscreen
          mozallowfullscreen="true"
          webkitallowfullscreen="true" style="width: 100%; height: 100%;"></iframe>

        <a id="ios-ar-link" rel="ar"
          href="https://tmw.digital/3D.V.1.0/webgl/collections/makai/Assets/Thumb/Mitsubishi_Eclipse_Cross_2024_-_copy%20(2)%20(1).usdz"
          style="display: none;">
          <img src="/assets/models/my-model-thumbnail.jpg">
        </a>

      </div>
    </div>

    <!-- Bootstrap JS -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script type="module" src="src/3dView.js"></script>

  </body>

</html>